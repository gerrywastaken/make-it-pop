<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <title>Make It Pop - Settings</title>
  <link rel="stylesheet" href="../shared.css">
  <link rel="stylesheet" href="settings.css">
</head>
<body>
  <header class="header">
    <h1>Make It Pop Settings</h1>
  </header>

  <!-- Tab Navigation -->
  <nav class="tab-nav">
    <button class="tab-button active" data-tab="groups">Groups</button>
    <button class="tab-button" data-tab="domains">Domains</button>
    <button class="tab-button" data-tab="settings">Settings</button>
  </nav>

  <div class="content">
    <!-- GROUPS TAB -->
    <div class="tab-content active" id="groups">
      <button class="add-button primary" id="addGroup">+ Add Group</button>
      <div style="clear: both;"></div>

      <!-- Empty State Message for Groups -->
      <div id="groupsEmptyState" class="empty-state">
        <h2>üé® Welcome to Make It Pop!</h2>
        <p class="empty-state-intro">
          This extension highlights specific phrases on web pages with customizable colors.
          Perfect for identifying key terms, tracking important concepts, or making certain words stand out.
        </p>

        <div class="empty-state-section">
          <h3>üìã How It Works</h3>
          <ol class="empty-state-list">
            <li><strong>Create Groups</strong> - Organize phrases into color-coded groups (e.g., "Important Terms", "Names to Watch")</li>
            <li><strong>Add Phrases</strong> - Add multi-word phrases to each group that you want highlighted</li>
            <li><strong>Choose Colors</strong> - Pick different highlight colors for light and dark mode</li>
            <li><strong>Configure Domains</strong> - Specify which websites should have highlighting enabled</li>
          </ol>
        </div>

        <div class="empty-state-section">
          <h3>üöÄ Quick Start</h3>
          <p>Choose one of these options:</p>
          <div style="margin: 20px 0;">
            <button id="loadSampleData" class="primary" style="margin-right: 10px;">
              ‚ú® Load Sample Data
            </button>
            <span style="color: var(--muted-color); font-size: 14px;">
              or click <strong>"+ Add Group"</strong> above to start from scratch
            </span>
          </div>
          <p class="empty-state-example">
            <strong>Sample data includes:</strong> Example groups with tech terms and color coding,
            pre-configured for github.com to demonstrate the extension immediately.
          </p>
        </div>
      </div>

      <div id="groupsList"></div>
    </div>

    <!-- DOMAINS TAB -->
    <div class="tab-content" id="domains">
      <button class="add-button primary" id="addDomain">+ Add Domain</button>
      <div style="clear: both;"></div>

      <!-- Empty State Message for Domains -->
      <div id="domainsEmptyState" class="empty-state">
        <h2>üåê Domain Configuration</h2>
        <p class="empty-state-intro">
          Domains control where phrase highlighting is active and which color scheme to use.
        </p>

        <div class="empty-state-section">
          <h3>üí° Before You Start</h3>
          <p>You need to create at least one <strong>Group</strong> (in the Groups tab) before adding domains.</p>
        </div>

        <div class="empty-state-section">
          <h3>‚öôÔ∏è Domain Settings</h3>
          <ul class="empty-state-list">
            <li><strong>Domain</strong> - The website where highlighting should work (e.g., "github.com", "linkedin.com")</li>
            <li><strong>Match Mode</strong> - Control subdomain matching:
              <ul>
                <li><em>Domain + www</em> - Matches example.com and www.example.com</li>
                <li><em>All subdomains</em> - Matches any.subdomain.example.com</li>
                <li><em>Exact match</em> - Only matches the exact domain specified</li>
              </ul>
            </li>
            <li><strong>Mode</strong> - Choose light or dark color scheme for the domain</li>
            <li><strong>Groups</strong> - Select which phrase groups are active (or use all groups)</li>
          </ul>
        </div>

        <div class="empty-state-section">
          <p>Click the <strong>"+ Add Domain"</strong> button above to configure your first domain.</p>
        </div>
      </div>

      <div id="domainsList"></div>
    </div>

    <!-- SETTINGS TAB -->
    <div class="tab-content" id="settings">
      <div class="settings-section">
        <h3>üé® Appearance</h3>
        <p class="settings-description">
          Choose your preferred theme for the extension interface.
        </p>
        <div class="theme-selector">
          <label class="theme-option">
            <input type="radio" name="theme" value="light">
            <span class="theme-label">Light</span>
          </label>
          <label class="theme-option">
            <input type="radio" name="theme" value="auto" checked>
            <span class="theme-label">Auto</span>
          </label>
          <label class="theme-option">
            <input type="radio" name="theme" value="dark">
            <span class="theme-label">Dark</span>
          </label>
        </div>
        <p class="settings-description theme-auto-description">
          Auto mode follows your system's light/dark mode preference.
        </p>
      </div>

      <div class="settings-section">
        <h3>üîê Permissions</h3>
        <p class="settings-description">
          Control how the extension accesses websites.
        </p>
        <div id="permissionStatus" style="margin: 15px 0; padding: 10px; background: var(--bg-secondary); border-radius: 5px;">
          <p><strong>Current Status:</strong> <span id="permissionStatusText">Checking...</span></p>
        </div>
        <p class="settings-description" style="margin-bottom: 10px;">
          <strong>Option 1 (Recommended for trust):</strong> Grant permission for all sites at once.
          This means you never have to approve individual domains again.
        </p>
        <button id="grantAllSitesPermission" class="primary" style="margin-bottom: 15px;">
          üîì Grant Permission for All Sites
        </button>
        <p class="settings-description">
          <strong>Option 2 (More secure):</strong> Grant permissions one domain at a time using the üîì button
          next to each domain in the Domains tab. This gives you fine-grained control.
        </p>
      </div>

      <div class="settings-section">
        <h3>üì• Import / Export</h3>
        <p class="settings-description">
          Export your configuration to share with others or back up your settings.
        </p>
        <button id="exportData" class="primary">Export Configuration</button>
        <button id="importData" class="secondary">Import Configuration</button>
        <input type="file" id="importFile" accept=".json,.json5" style="display: none;">
        <div id="importStatus"></div>
      </div>

      <div class="settings-section">
        <h3>‚ÑπÔ∏è Version Information</h3>
        <p><strong>Build Version:</strong> <span id="buildVersion" title="Click me 5 times...">Loading...</span></p>
        <p><strong>Runtime Version:</strong> <span id="runtimeVersion">Loading...</span></p>
        <div id="versionWarning">‚ö†Ô∏è Version mismatch - reload extension</div>
      </div>

      <div id="debugOptions" class="settings-section" style="display: none;">
        <h3>üîß Debug Options</h3>
        <p class="settings-description">
          Advanced debugging features for troubleshooting extension behavior.
        </p>
        <label style="display: flex; align-items: center; gap: 10px; margin: 15px 0;">
          <input type="checkbox" id="debugModeCheckbox" style="width: auto;">
          <span>Enable debug logging in console</span>
        </label>
        <p class="settings-description" style="margin-top: 10px; font-size: 14px; color: var(--muted-color);">
          When enabled, detailed logs will appear in all browser consoles (page content, popup, and settings).
          This helps diagnose issues with highlighting behavior.
        </p>
      </div>
    </div>
  </div>

  <!-- Toast Notification -->
  <div class="toast" id="toast"></div>

  <script type="module" src="settings.js"></script>
</body>
</html>
